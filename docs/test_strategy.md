# test_strategy — Project Roots

このドキュメントは Project Roots におけるテスト方針をまとめる。まだ詳細なテストケースは未整備のため、現時点の原則とアウトラインを示す。

## 目的
- レイヤーごとに何をテストするかの境界を明確化
- 優先順位と実行タイミングの基準を共有
- LLM / 新規メンバーが迷子にならない最低限の道標を置く

## テスト階層（骨子）
1. 単体テスト（ユニット）
   - 対象: domain の純粋ロジック、usecase の分岐
   - 観点: ユビキタス言語のルールを守れているか、副作用なしで判定できるか
2. 結合テスト（インテグレーション）
   - 対象: adapter + infra を介した IO、DB/外部API への実アクセス
   - 観点: トランザクション境界、エラー変換、DTO マッピング
3. E2E / シナリオテスト
   - 対象: ユーザ視点の主要フロー（認証、購入など）
   - 観点: 本番同等構成での実行手順、テストデータの管理方法
4. 非機能テスト（後日拡張）
   - パフォーマンス、負荷、セキュリティ、アクセシビリティ

## 運用ルール（ドラフト）
- 新規機能は最小でもユニット + 結合テストをセットで追加する
- E2E はクリティカルフローから優先して整備し、staging デプロイ後に走らせる
- テストコードの配置は各レイヤーに隣接させる（例: `usecase/**/_test.go`）

## TODO / 未決事項
- CI 上でのテスト実行マトリクス（どの PR で何を回すか）
- テストデータ管理方針（固定フィクスチャ / Factory / Seed）
- E2E のツール選定（Playwright/Cypress など）
- 非機能テストの閾値と計測方法

詳細が固まり次第、具体的なサンプルやコマンドを追加する。
