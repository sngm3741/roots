# 店舗詳細ページ設計（MakotoClub）

共通ルール: `apps/makotoclub/docs/frontend_common.md` に準拠。差分のみ記載。  
__before の挙動を踏襲しつつ、D1/API 契約に合わせた表示仕様。

## 1. 概要
- 目的: 店舗の概要と直近のアンケートをまとめて表示し、アンケート投稿導線を提示する。
- メインCTA: 「アンケートを投稿」→ `/surveys/new`
- 対象ページ: `/stores/:id`

## 2. レイアウト
- コンテナ: `max-w-5xl mx-auto px-4`
- 構成:
  1) ヘッダーブロック（店名/基本情報/CTA）
  2) 概要カード（平均満足度/女子給/待機時間/営業時間）
  3) 最近のアンケート（最新10件・カード表示）

## 3. 表示項目
- ヘッダー:
  - 店名 + 支店名
  - 都道府県 / エリア
  - 業種 / ジャンル
  - 平均満足度（店平均 or 集計値）
  - 女子給ラベル（`averageEarningLabel` が無ければ `unitPrice`）
  - CTA: 「アンケートを投稿」
- 概要カード:
  - 総評（平均満足度）
  - 女子給平均（averageEarningLabel）
  - 待機時間（waitTimeLabel）
  - 営業時間（open/close がある場合のみ）
- 最近のアンケートカード（最大10件、新着順固定）:
  - 訪問時期
  - 満足度
  - コメント抜粋（優先: customerComment → workEnvironmentComment → staffComment → "コメントなし"）
  - 詳細リンク `/surveys/:id`
- 非表示項目（カードでは出さない）:
  - emailAddress, castBack, imageUrls などセンシティブ/冗長なもの

## 4. データ仕様
- 入力: API `/api/stores/:id` 応答（StoreDetail）
  - `surveys` は最新10件
- 計算:
  - 平均満足度/女子給/待機時間は API 側の集計値をそのまま表示

## 5. ユースケース
- 店舗詳細を確認し、アンケート一覧をざっと読み、必要なら投稿に進む。

## 6. イベント仕様
- 「アンケートを投稿」クリック → `/surveys/new`
- アンケートカード「詳しく読む」 → `/surveys/:id`

## 7. バリデーション
- 表示のみ。入力は無し。

## 8. 空状態
- アンケート0件の場合:
  - 文言: 「アンケートがありません。」
  - ボタン: 「アンケートを追加する」→ `/surveys/new`

## 9. 備考
- 並び替えは新着固定。件数は10件まで。
- 表示優先度: 店名/地域/業種の基本情報を最上部に置き、統計値は概要カードで補足する。
