# deployment — Project Roots

このドキュメントは Project Roots のデプロイ方針と環境運用の骨子をまとめる。まだ詳細は固まっていないため、現時点でのスコープと決定事項・未決事項を明示する。

## スコープ
- apps/ と base/ の backend / frontend / バッチのデプロイ方式
- インフラテンプレート（infra/ 配下）の使い方と前提
- Secrets / Config 配置の原則（詳細は `config_rules.md` を参照）

## 現時点のアウトライン
1. 対応環境
   - local（開発用）、staging（統合テスト用）、production（本番）
2. デプロイターゲット
   - backend: コンテナビルド + Compose/Kubernetes 想定
   - frontend: 静的ビルド成果物の配信（CDN / S3 などを想定）
   - バッチ/ジョブ: backend と同一イメージまたは専用イメージでのスケジュール実行
3. リリースフロー（ドラフト）
   - main へのマージ後に CI がコンテナをビルド
   - staging へ自動デプロイし、E2E/統合テストを実行
   - 手動承認後に production へ昇格
4. ロールバック方針（未確定）
   - コンテナタグの巻き戻しを基本とする
   - DB マイグレーションの扱いは別途定義（要追記）

## TODO / 未決事項
- ステートフルサービス（DB、キャッシュ、ストレージ）の標準運用モデル
- 監視・アラート連携（CloudWatch / Grafana など）の推奨構成
- CI/CD 実装例（GitHub Actions など）のテンプレ化
- スキーママイグレーションのロールバック手順

このアウトラインをベースに、具体的なインフラスタックが固まり次第、手順とサンプル設定を追記する。
